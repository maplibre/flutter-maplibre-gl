<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="example">
  <link rel="apple-touch-icon" href="/icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="/favicon.png"/>

  <!-- MapLibre -->
  <script src='https://unpkg.com/maplibre-gl@^5.3.0/dist/maplibre-gl.js'></script>
  <link href='https://unpkg.com/maplibre-gl@^5.3.0/dist/maplibre-gl.css' rel='stylesheet'/>
  <script src="https://unpkg.com/pmtiles@3.2.0/dist/pmtiles.js"></script>

  <title>example</title>
  <link rel="manifest" href="/manifest.json">
</head>
<body>
  <!-- This script installs service_worker.js to provide PWA functionality to
       application. For more information, see:
       https://developers.google.com/web/fundamentals/primers/service-workers -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('/flutter_service_worker.js');
      });
    }

    // This is just a rough sketch of how to set up a maplibre-gl JS map with pmtiles.
    // The URL used is the same as in assets/pmtiles_style.json.
    // In development this only works when passing `--web-browser-flag "--disable-web-security"` to flutter run.
    const protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles", protocol.tile);
    const PMTILES_URL = "https://demo-bucket.protomaps.com/v4.pmtiles";
    const source = new pmtiles.FetchSource(PMTILES_URL);
    protocol.add(new pmtiles.PMTiles(source));
  </script>
  <script src="main.dart.js" type="application/javascript"></script>
</body>
</html>
